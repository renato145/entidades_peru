(this.webpackJsonpentidades_peru=this.webpackJsonpentidades_peru||[]).push([[0],{170:function(e,t,n){},173:function(e,t,n){},174:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(72),s=n.n(r),i=(n(170),n(6)),o=n(7),l=n(4),u=n(2),d=n(8),b=n.n(d),j=n(5),m=n(19),f=n(74),O=n.p+"static/media/entidades.30d1f51e.csv",h=n.p+"static/media/poblacion_departamentos.0152a47d.csv",x=Object(i.atom)(Object(m.a)(b.a.mark((function e(){var t,n,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(l.a)(h,(function(e){return Object(j.a)(Object(j.a)({},e),{},{total:+e.total})}));case 2:return t=e.sent,n=new Map,a=0,t.forEach((function(e){var t=e.departamento,c=e.total;a+=c,n.set(t,c)})),n.set("all",a),e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)})))),p=function(e){var t,n=Object(l.j)(e,(function(e){return e.length}),(function(e){return e.poder})).sort((function(e,t){return Object(l.b)(e[1],t[1])}));return{entries:n,total:Object(l.l)(n.map((function(e){return e[1]}))),max:null!==(t=Object(l.h)(n.map((function(e){return e[1]}))))&&void 0!==t?t:0}},g=Object(i.atom)(Object(m.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(l.a)(O,(function(e){return e}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))),v=1e5,y=Object(i.atom)((function(e){var t=e(x),n=Object(l.j)(e(g),p,(function(e){return e.departamento})),a=new Map;return n.forEach((function(e){var n,c=Object(u.a)(e,2),r=c[0],s=c[1],i=null!==(n=t.get(r))&&void 0!==n?n:0;return a.set(r,Object(j.a)(Object(j.a)({},s),{},{population:i,density:s.total/i*v}))})),a})),w=Object(i.atom)((function(e){var t,n=p(e(g)),a=null!==(t=e(x).get("all"))&&void 0!==t?t:0;return Object(j.a)(Object(j.a)({},n),{},{population:a,density:n.total/a*v})})),N=Object(i.atom)(Object(m.a)(b.a.mark((function e(){var t,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(4).then(n.t.bind(null,177,3));case 2:return t=e.sent.default,a=Object(f.a)(t,"departamentos"),e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})))),k=Object(i.atom)(null),A=Object(i.atom)((function(e){var t=e(k);if(null===t)return null;var n=e(y).get(t);return void 0===n?null:Object(j.a)({name:t},n)})),V=Object(i.atom)("density"),M=Object(i.atom)((function(e){var t=e(y),n=e(V),a=Object(l.h)(Object(l.g)(t.values(),(function(e){var t=e.total,a=e.density;return"number"===n?t:a})));return null!==a&&void 0!==a?a:0})),S=n(1),P=function(e){var t=e.departamento,n=e.path,c=e.scale,r=Object(a.useMemo)((function(){var e;return{selectionStatusAtom:(e=t,Object(i.atom)((function(t){var n=t(k);return null===n?"empty":n===e?"selected":"other"}))),departamentoDataAtom:function(e){return Object(i.atom)((function(t){return t(y).get(e)}))}(t)}}),[t]),s=r.selectionStatusAtom,l=r.departamentoDataAtom,u=Object(o.useAtomValue)(s),d=Object(o.useAtomValue)(l),b=Object(o.useUpdateAtom)(k),j=Object(o.useAtomValue)(V),m=c(void 0===d?0:"number"===j?d.total:d.density);return Object(S.jsx)("path",{className:"stroke-current text-gray-700 ".concat("selected"===u?"selected-land stroke-[3px]":"other"===u?"opacity-25":""),transform:"Callao"===t?"scale(4),translate(-140,-384)":"",style:"Callao"!==t?{}:{strokeWidth:"selected"===u?.7:.3},fill:m,d:n,onPointerEnter:function(){return b(t)},onPointerLeave:function(){return b(null)}})},z=function(e){return e<20?"start":e>80?"end":"middle"},F=function(e,t){return"number"===t?e:e.toFixed(1)},C=function(e){var t=e.mapSize,n=e.legendSize,c=e.legendMargins,r=e.scale,s=e.orientation,i=void 0===s?"horizontal":s,d=e.ticks,b=void 0===d?0:d,j=e.tickHeight,m=void 0===j?8:j,f=e.textOffset,O=void 0===f?15:f,h=Object(a.useMemo)((function(){return"colorLegendGradient".concat(Math.round(1e4*Math.random()))}),[]),x=r.domain(),p=Object(u.a)(x,2),g=p[0],v=p[1],y=Object(o.useAtomValue)(A),w=Object(o.useAtomValue)(V),N=null===y?0:"number"===w?y.total:y.density,k=(N-g)/v*100,M=k*n.width/100;return Object(S.jsxs)("g",{children:[Object(S.jsx)("linearGradient",{id:h,gradientTransform:"rotate(".concat("horizontal"===i?0:90,")"),children:Object(l.i)(0,100.01,20).map((function(e,t){return Object(S.jsx)("stop",{offset:"".concat(e,"%"),stopColor:r((g+e*(v-g))/100)},t)}))}),Object(S.jsxs)("g",{transform:"translate(".concat(c.left,",").concat(t.height+c.top,")"),children:[Object(S.jsx)("text",{x:2,y:-7,className:"text-lg tracking-wide text-gray-800 fill-current font-semibold",children:"number"===w?"Nro de entidades":"Nro de entidades por 100mil habitantes"}),Object(S.jsx)("rect",{width:n.width,height:n.height,fill:"url(#".concat(h,")"),className:"text-gray-800 stroke-current"}),Object(S.jsxs)("g",{transform:"translate(0, ".concat(n.height+c.bottom,")"),children:[Object(l.i)(0,100.01,100/(1+b)).map((function(e,t){var a=e*n.width/100;return Object(S.jsxs)("g",{opacity:null===y?1:.2,children:[Object(S.jsx)("line",{x1:a,x2:a,y1:0,y2:m,className:"text-gray-800 stroke-current"}),Object(S.jsx)("text",{x:a,y:m+O,textAnchor:z(e),className:"text-sm text-gray-800 font-semibold fill-current",children:F(g+e/100*(v-g),w)})]},t)})),Object(S.jsxs)("g",{opacity:null===y?0:1,className:"transition-opacity",children:[Object(S.jsx)("line",{transform:"translate(".concat(M,",",0,")"),y1:0,y2:m,className:"text-gray-800 stroke-current transition-transform"}),Object(S.jsx)("text",{transform:"translate(".concat(M,",",0,")"),y:m+O,textAnchor:z(k),className:"text-gray-800 fill-current font-semibold transition-transform",children:null!==y?"".concat(y.name," (").concat(F(N,w),")"):""})]})]})]})]})},E=(n(173),{width:540,height:800}),L={width:E.width,height:E.height+75},B={left:20,right:20,top:10,bottom:0},D={width:L.width-B.left-B.right,height:30},_=function(){var e=Object(o.useAtomValue)(N),t=Object(o.useAtomValue)(M),n=Object(a.useMemo)((function(){var t=Object(l.d)().fitSize([E.width,E.height],e);return Object(l.e)(t)}),[e]),c=Object(a.useMemo)((function(){return Object(l.k)().domain([0,t]).interpolator(l.f)}),[t]);return Object(S.jsxs)("svg",{className:"max-w-[400px] max-h-[650px]",viewBox:"0 0 ".concat(L.width," ").concat(L.height),children:[e.features.map((function(e,t){return Object(S.jsx)(P,{departamento:e.properties.departamento,path:n(e),scale:c},t)})),Object(S.jsx)(C,{mapSize:E,legendSize:D,legendMargins:B,scale:c})]})},G=Object(l.c)(","),H=function(e){var t=Object.assign({},e),n=Object(o.useAtomValue)(k),a=Object(o.useAtomValue)(A),c=Object(o.useAtomValue)(w),r=null!==a&&void 0!==a?a:c;return Object(S.jsxs)("div",Object(j.a)(Object(j.a)({},t),{},{children:[Object(S.jsxs)("p",{className:"text-2xl font-semibold",children:[null!==n&&void 0!==n?n:"Per\xfa",": ",G(r.total)," entidades"]}),Object(S.jsxs)("p",{className:"text-sm tracking-wide font-semibold text-gray-500",children:[r.density.toFixed(1)," entidades por cada 100mil habitantes"]}),Object(S.jsx)("div",{className:"mt-3 w-full flex flex-col space-y-2",children:r.entries.map((function(e,t){var n=Object(u.a)(e,2),a=n[0],c=n[1];return Object(S.jsxs)("div",{children:[Object(S.jsxs)("p",{className:"text-sm text-gray-800 font-medium tracking-wide",children:[a," (",c,")"]}),Object(S.jsx)("div",{className:"bg-blue-900 h-5",style:{width:"".concat(100*c/r.max,"%")}})]},t)}))})]}))},I=n(75),J=["className","children","type"],T=function(e){e.className;var t=e.children,n=(e.type,Object(I.a)(e,J));return Object(S.jsx)("button",Object(j.a)(Object(j.a)({className:"px-2 py-2 bg-blue-400 disabled:bg-blue-500 hover:bg-blue-600 active:bg-blue-800 shadow rounded text-white tracking-wide focus:outline-none focus:ring disabled:ring-4 disabled:ring-blue-800 transition"},n),{},{children:t}))},W=function(e){var t=Object(i.useAtom)(V),n=Object(u.a)(t,2),a=n[0],c=n[1];return Object(S.jsx)("div",Object(j.a)(Object(j.a)({},e),{},{children:Object(S.jsxs)("div",{className:"flex flex-col space-y-2",children:[Object(S.jsx)(T,{onClick:function(){return c("number")},disabled:"number"===a,children:"Visualizar por n\xfamero de entidades"}),Object(S.jsxs)(T,{onClick:function(){return c("density")},disabled:"density"===a,children:[Object(S.jsx)("p",{children:"Visualizar por densidad"}),"(entidades por cada 100mil habitantes)"]})]})}))},U=["Departamento","Habitantes","#Entidades","#Entidades por\n100mil habitantes"],X=Object(l.c)(","),q=function(e){var t=Object(i.useAtom)(k),n=Object(u.a)(t,2),a=n[0],c=n[1],r="number"===Object(o.useAtomValue)(V)?2:3,s=Array.from(Object(o.useAtomValue)(y)).map((function(e){var t=Object(u.a)(e,2),n=t[0],a=t[1];return[n,a.population,a.total,a.density]})).sort((function(e,t){return Object(l.b)(e[r],t[r])}));return Object(S.jsx)("div",Object(j.a)(Object(j.a)({},e),{},{children:Object(S.jsxs)("table",{className:"table-auto border border-blue-100",children:[Object(S.jsx)("thead",{children:Object(S.jsx)("tr",{children:U.map((function(e,t){return Object(S.jsx)("th",{className:"px-3 py-2 bg-blue-500 text-white font-medium tracking-wide whitespace-pre-line ".concat(0===t?"rounded-tl-lg":t===U.length-1?"rounded-tr-lg":""),children:e},t)}))})}),Object(S.jsx)("tbody",{children:s.map((function(e,t){return Object(S.jsx)("tr",{className:"".concat(e[0]===a?"bg-blue-900 text-white":t%2===0?"bg-blue-100":"bg-gray-50"," cursor-default"),onPointerEnter:function(){return c(e[0])},onPointerLeave:function(){return c(null)},children:e.map((function(e,t){return Object(S.jsx)("td",{className:"px-3 py-1.5 ".concat(0===t?"text-left":"text-right"),children:1===t?X(e):3===t?e.toFixed(2):e},t)}))},t)}))})]})}))},K=n(176),Q=n(73),R=[["Lista de entidades","https://www.datosabiertos.gob.pe/dataset/lista-de-entidades-del-estado-peruano"],["Poblaci\xf3n","https://cloud.minsa.gob.pe/apps/onlyoffice/s/XJ3NoG3WsxgF6H8?fileId=613439"],["Shapefiles","https://www.geogpsperu.com/2014/03/base-de-datos-peru-shapefile-shp-minam.html"]],Y=function(e){return Object(S.jsx)("div",Object(j.a)(Object(j.a)({},e),{},{children:Object(S.jsx)(K.a,{children:function(e){var t=e.open;return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsxs)(K.a.Button,{className:"self-end flex hover:underline focus:outline-none focus-visible:outline-none focus-visible:ring focus-visible:ring-blue-500 focus-visible:ring-opacity-50",children:[Object(S.jsx)("span",{children:"Ver informaci\xf3n acerca de las fuentes de datos"}),Object(S.jsx)(Q.a,{className:"".concat(t?"rotate-180":""," ml-1 mt-1 w-4 h-4 transition-transform")})]}),Object(S.jsx)(K.a.Panel,{className:"mt-1 mb-0.5 pl-6 pr-2 py-2.5 bg-gray-200 ring-2 ring-gray-300 rounded-lg shadow",children:Object(S.jsx)("ul",{className:"list-decimal space-y-2 break-all",children:R.map((function(e,t){var n=Object(u.a)(e,2),a=n[0],c=n[1];return Object(S.jsxs)("li",{children:[a,":"," ",Object(S.jsx)("a",{href:c,target:"_black",rel:"noopener",children:c})]},t)}))})})]})}})}))},Z=function(){return Object(S.jsx)(i.Provider,{children:Object(S.jsxs)("div",{className:"container mx-auto mt-4",children:[Object(S.jsx)("h1",{className:"text-center text-4xl font-semibold",children:"Entidades del estado peruano"}),Object(S.jsx)(a.Suspense,{fallback:Object(S.jsx)("p",{children:"Loading..."}),children:Object(S.jsx)("div",{className:"mt-8 p-2 flex flex-col",children:Object(S.jsxs)("div",{className:"flex flex-wrap justify-evenly",children:[Object(S.jsx)(_,{}),Object(S.jsxs)("div",{className:"mt-1 flex-1 flex flex-wrap flex-col max-w-[300px] min-w-[200px]",children:[Object(S.jsx)(W,{}),Object(S.jsx)(H,{className:"mt-6"})]}),Object(S.jsxs)("div",{className:"flex flex-col",children:[Object(S.jsx)(Y,{className:"flex flex-col w-full max-w-md"}),Object(S.jsx)(q,{})]})]})})})]})})},$=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,178)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),r(e),s(e)}))};s.a.render(Object(S.jsx)(c.a.StrictMode,{children:Object(S.jsx)(Z,{})}),document.getElementById("root")),$()}},[[174,1,2]]]);
//# sourceMappingURL=main.800cc3df.chunk.js.map